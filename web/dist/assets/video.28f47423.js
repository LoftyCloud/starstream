import{V as I,a as V}from"./VH-Upload.a2b28b45.js";import{_ as w,h as M,r as a,o as l,c,d as h,i as v,w as x,b as n,a as r,n as k,t as y,p as H,e as D}from"./index.eb72afd3.js";import{p as d}from"./index.8b535f41.js";const A={name:"vh-video",components:{VHInfomation:I,VHUpload:V},data(){return{showText:!1,vid:null,showDlialog:!1,dialogBox:1,videoUrl:"",videoData:null,videoname:"",relationId:0}},created(){document.title="StarSteam",this.vid=this.$route.query.vid,this.videoUrl=M.baseUrl.url+"/file/video/"+this.vid+".mp4",this.getVideoInfo(),this.getIsRelation(),this.$nextTick(()=>{const o=localStorage.getItem("videoVolume")||.5;this.$refs.videoPlayer&&(this.$refs.videoPlayer.volume=o,console.log(o))})},methods:{saveVolume(){const o=this.$refs.videoPlayer.volume;localStorage.setItem("videoVolume",o)},goHeader(o){o.where=="info"?(this.dialogBox=1,this.showDlialog=!0):o.where=="upload"?(this.dialogBox=2,this.showDlialog=!0):o.where=="loginout"&&console.log("\u9000\u51FA")},getVideoInfo(){let o={vid:parseInt(this.vid)};d("/watch/find",o).then(e=>{this.videoData=e.data.list,this.videoname=this.videoData.detail,d("/watch/plus",o).then(u=>{})})},getIsRelation(){let o={vid:parseInt(this.vid)};d("/relation/is",o).then(e=>{this.relationId=e.data.relation})},addRelation(){let o={vid:parseInt(this.vid)};d("/relation/add",o).then(e=>{switch(this.relationId=e.data.relation,e.code){case 201:this.$refs.AlertMsg.addMsg(2,"\u4F60\u5DF2\u7ECF\u6536\u85CF\u8FC7\u8BE5\u89C6\u9891");break;case 202:this.$refs.AlertMsg.addMsg(2,"\u5728\u6DFB\u52A0\u6536\u85CF\u65F6\u4EA7\u751F\u4E86\u672A\u77E5\u7684\u5F02\u5E38");break;case 200:this.$refs.AlertMsg.addMsg(1,"\u6536\u85CF\u89C6\u9891\u6210\u529F"),this.relationId=e.data.relation;break;default:this.$refs.AlertMsg.addMsg(2,"\u672A\u77E5\u9519\u8BEF\uFF1A"+e.msg)}})},removeRelation(){let o={vid:parseInt(this.vid)};d("/relation/delete",o).then(e=>{switch(e.code){case 201:this.$refs.AlertMsg.addMsg(2,"\u5728\u5220\u9664\u6536\u85CF\u65F6\u4EA7\u751F\u4E86\u672A\u77E5\u7684\u5F02\u5E38");break;case 200:this.$refs.AlertMsg.addMsg(1,"\u53D6\u6D88\u6536\u85CF\u89C6\u9891\u6210\u529F"),this.relationId=0;break;default:this.$refs.AlertMsg.addMsg(2,"\u672A\u77E5\u9519\u8BEF\uFF1A"+e.msg)}})}}},b=o=>(H("data-v-177d161f"),o=o(),D(),o),B={class:"main-box"},R={class:"video-box"},S=["src"],C={class:"video-info"},U=b(()=>r("p",null,"\u5DF2\u6536\u85CF",-1)),T=[U];function j(o,e,u,P,t,i){const g=a("Headers"),m=a("VH-Infomation"),f=a("VH-Upload"),p=a("VH-Dialog"),_=a("AlertMsg");return l(),c("div",B,[h(g,{onGo:i.goHeader,nosearch:!0,nocollect:!0},null,8,["onGo"]),t.showDlialog?(l(),v(p,{key:0,onClose:e[0]||(e[0]=s=>t.showDlialog=!1)},{default:x(()=>[t.dialogBox==1?(l(),v(m,{key:0})):n("",!0),t.dialogBox==2?(l(),v(f,{key:1})):n("",!0)]),_:1})):n("",!0),r("div",R,[r("video",{ref:"videoPlayer",class:"video",src:t.videoUrl,type:"video/mp4",preload:"auto",controls:"controls",onVolumechange:e[1]||(e[1]=(...s)=>i.saveVolume&&i.saveVolume(...s))},null,40,S),r("div",C,[r("p",{onMouseenter:e[2]||(e[2]=s=>t.showText=!0),onMouseleave:e[3]||(e[3]=s=>t.showText=!1),class:k(t.showText?"video-title":"video-title hidde-tex")},y(t.videoname),35),t.relationId==0?(l(),c("span",{key:0,title:"\u6DFB\u52A0\u5230\u6536\u85CF",onClick:e[4]||(e[4]=(...s)=>i.addRelation&&i.addRelation(...s)),class:"collect iconfont icon-shoucang-shoucang"},"\u6536\u85CF")):n("",!0),t.relationId!=0?(l(),c("span",{key:1,title:"\u53D6\u6D88\u6536\u85CF",onClick:e[5]||(e[5]=(...s)=>i.removeRelation&&i.removeRelation(...s)),class:"iscollect iconfont icon-shoucang-shoucang"},T)):n("",!0)])]),h(_,{ref:"AlertMsg"},null,512)])}var z=w(A,[["render",j],["__scopeId","data-v-177d161f"]]);export{z as default};
//# sourceMappingURL=video.28f47423.js.map
