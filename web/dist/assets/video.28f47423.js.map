{"version":3,"file":"video.28f47423.js","sources":["../../src/views/video/video.vue"],"sourcesContent":["<!--点进video显示的页面-->\n<template>\n    <div class=\"main-box\">\n\t\t<Headers @go=\"goHeader\" :nosearch=\"true\" :nocollect=\"true\"></Headers>\n        <VH-Dialog v-if=\"showDlialog\" @close=\"showDlialog=false\">\n\t\t\t<VH-Infomation v-if=\"dialogBox==1\"></VH-Infomation>\n\t\t\t<VH-Upload v-if=\"dialogBox==2\"></VH-Upload>\n\t\t</VH-Dialog>\n        <div class=\"video-box\">\n<!--            <video class=\"video\" :src=\"videoUrl\" type=\"video/mp4\" preload=\"auto\" controls=\"controls\"></video>-->\n            <video ref=\"videoPlayer\" class=\"video\" :src=\"videoUrl\" type=\"video/mp4\" preload=\"auto\" controls=\"controls\" @volumechange=\"saveVolume\"></video>\n\n\n            <div class=\"video-info\">\n                <p @mouseenter=\"showText=true\" @mouseleave=\"showText=false\" :class=\"showText ? 'video-title':'video-title hidde-tex'\">{{videoname}}</p>\n                <span v-if=\"relationId==0\" title=\"添加到收藏\" @click=\"addRelation\" class=\"collect iconfont icon-shoucang-shoucang\">收藏</span>\n                <span v-if=\"relationId!=0\" title=\"取消收藏\" @click=\"removeRelation\" class=\"iscollect iconfont icon-shoucang-shoucang\"><p>已收藏</p></span>\n            </div>\n        </div>\n        <AlertMsg ref=\"AlertMsg\"></AlertMsg>\n    </div>\n</template>\n\n<script>\nimport VHInfomation from '@/components/VH-Infomation/VH-Infomation.vue';\nimport VHUpload from '@/components/VH-Upload/VH-Upload.vue';\nimport config from '@/api/config';\nimport { postRequest } from '@/api';\nexport default {\n    name: 'vh-video',\n    components:{\n\t\tVHInfomation,\n\t\tVHUpload,\n\t},\n    data () {\n        return {\n            showText:false,\n            vid:null,\n            showDlialog:false,\n            dialogBox:1,\n            videoUrl:'',\n            videoData:null,\n            videoname:'',\n            relationId:0,\n        }\n    },\n    created() {\n        document.title ='StarSteam';\n        this.vid=this.$route.query.vid\n        this.videoUrl = config.baseUrl.url +'/file/video/'+this.vid+'.mp4'\n        this.getVideoInfo()\n        this.getIsRelation()\n\n        this.$nextTick(() => {\n            const savedVolume = localStorage.getItem('videoVolume') || 0.5;  // 获取保存的音量，默认为0.5\n            if (this.$refs.videoPlayer) {\n                this.$refs.videoPlayer.volume = savedVolume;  // 设置初始音量\n                console.log(savedVolume)\n            }\n        });\n    },\n    methods:{\n        saveVolume() {\n            const currentVolume = this.$refs.videoPlayer.volume;\n            localStorage.setItem('videoVolume', currentVolume);  // 将音量保存到localStorage\n        },\n\n        goHeader(e){\n          if(e.where == 'info'){\n            this.dialogBox = 1\n            this.showDlialog=true\n          }else if(e.where == 'upload'){\n            this.dialogBox = 2\n            this.showDlialog=true\n          }else if(e.where == 'loginout'){\n            console.log(\"退出\")\n          }\n\t\t    },\n        getVideoInfo(){\n            let json ={ 'vid': parseInt(this.vid) }\n            postRequest('/watch/find',json).then(res => {\n                this.videoData=res.data.list\n                this.videoname = this.videoData.detail\n                postRequest('/watch/plus',json).then(res => {\n                   \n                })\n            })\n        },\n        getIsRelation(){\n            let json ={ 'vid': parseInt(this.vid) }\n            postRequest('/relation/is',json).then(res => {\n                this.relationId=res.data.relation\n            })\n        },\n        addRelation(){\n            let json ={ 'vid': parseInt(this.vid) }\n            postRequest('/relation/add',json).then(res => {\n                this.relationId=res.data.relation\n                switch (res.code) {\n                    case 201:\n                        this.$refs.AlertMsg.addMsg(\n                            2,\"你已经收藏过该视频\")\n                        break\n                    case 202:\n                        this.$refs.AlertMsg.addMsg(\n                            2,\"在添加收藏时产生了未知的异常\"\n                        )\n                        break\n                    case 200:\n                        this.$refs.AlertMsg.addMsg(\n                            1,\"收藏视频成功\"\n                        )\n                        this.relationId = res.data.relation\n                        break\n                    default:\n                        this.$refs.AlertMsg.addMsg(\n                            2,\"未知错误：\"+res.msg\n                        )\n                }\n            })\n        },\n        removeRelation(){\n            let json ={ 'vid': parseInt(this.vid) }\n            postRequest('/relation/delete',json).then(res => {\n                 switch (res.code) {\n                    case 201:\n                        this.$refs.AlertMsg.addMsg(\n                            2,\"在删除收藏时产生了未知的异常\")\n                        break\n                    case 200:\n                        this.$refs.AlertMsg.addMsg(\n                            1,\"取消收藏视频成功\"\n                        )\n                        this.relationId = 0\n                        break\n                    default:\n                        this.$refs.AlertMsg.addMsg(\n                            2,\"未知错误：\"+res.msg\n                        )\n                }\n            })\n        },\n    },\n}\n</script>\n\n<style  scoped>\n@import '@/assets/css/video.css';\n</style>\n"],"names":["_sfc_main","VHInfomation","VHUpload","config","savedVolume","currentVolume","e","json","postRequest","res","_hoisted_1","_hoisted_2","_hoisted_4","_hoisted_5","_withScopeId","_createElementVNode","_openBlock","_createElementBlock","_createVNode","_component_Headers","$options","$data","_createBlock","_component_VH_Dialog","_component_VH_Infomation","_component_VH_Upload","args","_component_AlertMsg"],"mappings":"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"}